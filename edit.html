<!DOCTYPE html>
<html>
  <head>
    <title>Data-driven petition</title>
    <meta charset="utf-8" />
    
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://dev.mavo.io/dist/mavo.css">

    <link rel="stylesheet" type="text/css" href="css/loader.css"/>
  </head>
  <body>
    <nav>
      <div class="nav-wrapper orange darken-3">
        <a href="./" class="brand-logo">Logo</a>
        <ul id="nav-mobile" class="right">
            <li id="content"></li>
            <!--Add buttons to initiate auth sequence and sign out-->
            <li><a id="authorize_button" style="display: none;">Log in with Google account</a></li>
            <li><a id="signout_button" style="display: none;">Sign Out</a></li>
          </ul>
      </div>
    </nav>

    <div class="section no-pad-bot">
      <div class="container">
        <h1 class="header center orange-text">Create your petition</h1>
        <div class="row center">
          
        </div>
        <div class="row center">
          
          <!-- <input class="authorize-only" id="input_edit_signature" type="button" value="Edit signature" onclick="window.open('http://www.website.com/page')" /> -->
          <input class="authorize-only btn waves-effect waves-light orange" id="input_edit_signature" type="button" value="Edit signature"
                 onclick="window.open('http://www.website.com/page')" />
          <button id="btn_add_collaborators" class="btn waves-effect waves-light grey" onclick="routeToDashboard()">Add collaborators</button>
          <button id="btn_view_summary" class="btn waves-effect waves-light grey" onclick="routeToDashboard()">View summary</button>
        </div>

        <div id="petition-container" class="row" mv-mode="edit" mv-unauthenticated-permissions="read edit save" mv-storage="firebase" mv-server-push mv-autosave>
          <p id="display-link"></p>

          <div class="divider"></div>

          <h5 property="title" class="header col s12 light" style="display:inline-block;">My petition title</h5>
          
          <h5 class="header col s12 light">Content</h5>
          Need rich text editor here. <br/>

          <h5 class="header col s12 light">Signature Questions</h5>
          Choose which questions are public or not. Response of public questions will be visible to other users and they can use it for their visualization. Unmark personal information (e.g. name, contact) to make it private.


          <div class="left-align col m6 offset-m3 s12">
            <div class="card">
              <div class="card-content">
                <span class="card-title">public?</span>
                <div id="questions-public-setting">
                  <p mv-multiple property="question">
                    <label> <input property="done" type="checkbox" name="questions-public" checked="checked"> <span>[title]</span> </label>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="divider"></div>

        <div class="row center">
          <h5 class="header col s12 light">Signature Preview</h5>
          <div style="width:800px;height:800px;" id="signature-container"></div>
        </div>
      </div>
    </div>

    <div class="loading-container">
      <div class="loading"></div>
      <div id="loading-text">Loading your petition</div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>

    <script type="text/javascript" src="js/privacy.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/utils.js"></script>

    <script>
      var params = getJsonFromUrl(true);
      $("#petition-container").attr("mv-app", "petition/" + params['petition']);
    </script>

    <script type="text/javascript" src="js/edit.js"></script>

    <script type="text/javascript" src="js/lib/mavo.js"></script>
    <script type="text/javascript" src="js/lib/mavo-firebase.min.js"></script>
    
    <script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>
    
  </body>
</html>